(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),o=t(3),i=t(6),u=t(2),s=t(4),a=t.n(s),l="/api/persons",d=function(){return a.a.get(l).then((function(e){return e.data}))},f=function(e){return a.a.post(l,e).then((function(e){return e.data}))},j=function(e){var n="".concat(l,"/").concat(e);return a.a.delete(n).then((function(e){return e.data}))},b=function(e){var n="".concat(l,"/").concat(e.id);return a.a.put(n,e).then((function(e){return e.data}))},h=(t(38),t(0)),m=function(e){var n=e.numbers,t=e.persons,c=e.setPersons,r=e.setNotification;return Object(h.jsx)("div",{children:n.map((function(e){return Object(h.jsx)(O,{number:e,deleteNumber:function(){return n=e.id,o=e.name,console.log("Deleting "+n),void(window.confirm("Delete ".concat(o," ?"))&&(j(n).then((function(e){c(t.filter((function(e){return e.id!==n}))),w(r,"Deleted ".concat(o," successfully"))})).catch((function(e){c(t.filter((function(e){return e.id!==n}))),w(r,"".concat(o," was already removed from server"),"error")})),d().then((function(e){c(e)}))));var n,o}},e.id)}))})},O=function(e){var n=e.number,t=e.deleteNumber;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[n.name," ",n.number," ",Object(h.jsx)("button",{onClick:t,children:"delete"})]},n.name)})},v=function(e){var n=e.filter,t=e.setNewFilter;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},p=function(e){var n=e.persons,t=e.setPersons,c=e.newName,r=e.setNewName,o=e.newPhone,u=e.setNewPhone,s=e.setNotification,a=function(){return n.some((function(e){return e.name===c}))},l=function(e,n,t){f(t).then((function(c){n(e.concat(c)),w(s,"Added ".concat(t.name," successfully"))})).catch((function(e){w(s,e.response.data.error,"error")}))},d=function(){if(window.confirm("".concat(c," is already added to phonebook, replace the old number with a new one?"))){var e=n.find((function(e){return e.name===c})),r=Object(i.a)(Object(i.a)({},e),{},{number:o}),u=e.id;b(r).then((function(e){t(n.map((function(n){return n.id!==u?n:e}))),w(s,"Updated ".concat(r.name," successfully"))}))}};return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var i={name:c,number:o};a()?d():l(n,t,i),r(""),u("")},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:c,onChange:function(e){r(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:o,onChange:function(e){u(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.notification;return null===n?null:Object(h.jsx)("div",{className:n.type,children:n.message})},w=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";e({message:n,type:t}),setTimeout((function(){e(null)}),5e3)},N=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(o.a)(r,2),s=i[0],a=i[1],l=Object(u.useState)(""),f=Object(o.a)(l,2),j=f[0],b=f[1],O=Object(u.useState)(""),w=Object(o.a)(O,2),N=w[0],g=w[1],y=Object(u.useState)(null),P=Object(o.a)(y,2),S=P[0],k=P[1];Object(u.useEffect)((function(){d().then((function(e){c(e)}))}),[]),console.log("render",t.length,"persons");var C=""===N?t:t.filter((function(e){return e.name.includes(N)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{notification:S}),Object(h.jsx)(v,{filter:N,setNewFilter:g}),Object(h.jsx)("h3",{children:"add a new"}),Object(h.jsx)(p,{persons:t,setPersons:c,newName:s,setNewName:a,newPhone:j,setNewPhone:b,setNotification:k}),Object(h.jsx)("h3",{children:"Numbers"}),Object(h.jsx)(m,{numbers:C,persons:t,setPersons:c,setNotification:k})]})};r.a.render(Object(h.jsx)(N,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bbd3d6df.chunk.js.map